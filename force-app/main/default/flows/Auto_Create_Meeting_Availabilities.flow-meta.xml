<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>61.0</apiVersion>
    <assignments>
        <name>Add_Day</name>
        <label>Add Day</label>
        <locationX>50</locationX>
        <locationY>576</locationY>
        <assignmentItems>
            <assignToReference>Current_Schedule_Date</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get.MUSW__Scheduled_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Current_Schedule_Date</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>7.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_4</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Times_To_Dates</name>
        <label>Add Times To Dates</label>
        <locationX>182</locationX>
        <locationY>1560</locationY>
        <assignmentItems>
            <assignToReference>TuesdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>NineAM</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TuesdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TenAM</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ThursdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OnePM</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ThursdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TwoPM</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_It_Tuesday</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_Collection</name>
        <label>Add to Collection</label>
        <locationX>50</locationX>
        <locationY>876</locationY>
        <assignmentItems>
            <assignToReference>ThursdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OnePM</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ThursdayTimes</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TwoPM</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_3</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Here we want to add our individual Meeting, to our collection so we can create at the end</description>
        <name>Add_To_Meeting_Collection</name>
        <label>Add To Meeting Collection</label>
        <locationX>162</locationX>
        <locationY>2592</locationY>
        <assignmentItems>
            <assignToReference>Proceedings_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Single_Proceeding</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_For_Thursday</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Here we want to add our individual Meeting, to our collection so we can create at the end</description>
        <name>Add_To_Meeting_Collection_Tuesday</name>
        <label>Add To Meeting Collection Tuesday</label>
        <locationX>162</locationX>
        <locationY>1992</locationY>
        <assignmentItems>
            <assignToReference>Proceedings_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Single_Proceeding</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_For_Tuesday_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Dates_and_Times_For_Thursdays</name>
        <label>Assign Dates and Times For Thursdays</label>
        <locationX>162</locationX>
        <locationY>2484</locationY>
        <assignmentItems>
            <assignToReference>Create_Meetings_Boolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pre-Application/Scoping</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Scheduled_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FirstTuesdayDateTimeValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Proceeding_Body__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Planning Department</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Maximum_Agenda_Items__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_To_Meeting_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Dates_and_Times_For_Tuesdays</name>
        <label>Assign Dates and Times For Tuesdays</label>
        <locationX>162</locationX>
        <locationY>1884</locationY>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pre-Application/Scoping</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Scheduled_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FirstTuesdayDateTimeValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Proceeding_Body__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Planning Department</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Create_Meetings_Boolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Maximum_Agenda_Items__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_To_Meeting_Collection_Tuesday</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Number_of_Meetings_to_Schedule</name>
        <label>Assign Number of Meetings to Schedule</label>
        <locationX>182</locationX>
        <locationY>360</locationY>
        <assignmentItems>
            <assignToReference>Number_of_Meeting_Days_to_Schedule</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Number_of_Thursdays_Difference</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_meetings_to_schedule</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_2_of_Assign_Dates_and_Times_For_Thursdays</name>
        <label>Copy 2 of Assign Dates and Times For Thursdays</label>
        <locationX>138</locationX>
        <locationY>1092</locationY>
        <assignmentItems>
            <assignToReference>Create_Meetings_Boolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pre-Application/Scoping</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Scheduled_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FirstTuesdayDateTimeValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Proceeding_Body__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Planning Department</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Single_Proceeding.MUSW__Maximum_Agenda_Items__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_3</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Are_there_meetings_to_schedule</name>
        <label>Are there meetings to schedule?</label>
        <locationX>182</locationX>
        <locationY>468</locationY>
        <defaultConnector>
            <targetReference>Time_to_schedule_next_pre_app_meeting</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Meetings_to_Schedule</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Number_of_Thursdays_Difference</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Day</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_It_Tuesday</name>
        <label>Is It Tuesday</label>
        <locationX>182</locationX>
        <locationY>1668</locationY>
        <defaultConnector>
            <targetReference>Is_Thursday_True</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Tuesday</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsItTuesday</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>TuesdayWeekNumber</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>3.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_For_Tuesday_Values</targetReference>
            </connector>
            <label>Yes Tuesday</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Thursday_True</name>
        <label>Is Thursday True</label>
        <locationX>182</locationX>
        <locationY>2268</locationY>
        <defaultConnector>
            <targetReference>Create_Meetings</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Thursday</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsItThursday</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ThursdayWeekNumber</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_For_Thursday</targetReference>
            </connector>
            <label>Yes Thursday</label>
        </rules>
    </decisions>
    <decisions>
        <name>Time_to_schedule_next_pre_app_meeting</name>
        <label>Time to schedule next pre-app meeting?</label>
        <locationX>182</locationX>
        <locationY>1368</locationY>
        <defaultConnector>
            <targetReference>Add_Times_To_Dates</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Schedule_PreApp_Scoping_Meeting</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get.MUSW__Scheduled_Date__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Today_Plus_4_Months</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Times_To_Dates</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>test</description>
    <environments>Default</environments>
    <formulas>
        <name>FirstThursdayDateValue</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 31</expression>
    </formulas>
    <formulas>
        <name>FirstTuesdayDateTimeValue</name>
        <dataType>DateTime</dataType>
        <expression>DATETIMEVALUE(TEXT(TODAY() + 31 )&amp; &apos; &apos; &amp;{!Loop_For_Thursday})</expression>
    </formulas>
    <formulas>
        <name>FirstTuesdayDateValue</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 31</expression>
    </formulas>
    <formulas>
        <name>IsItThursday</name>
        <dataType>Boolean</dataType>
        <expression>if( WEEKDAY({!FirstThursdayDateValue}) = 5, true, false)</expression>
    </formulas>
    <formulas>
        <name>IsItTuesday</name>
        <dataType>Boolean</dataType>
        <expression>if( WEEKDAY({!FirstTuesdayDateValue}) = 3, true, false)</expression>
    </formulas>
    <formulas>
        <name>Number_of_Thursdays_Difference</name>
        <dataType>Number</dataType>
        <expression>({!Today_Plus_4_Months} - DATEVALUE({!Get.MUSW__Scheduled_Date__c})) /7</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>ThursdayWeekNumber</name>
        <dataType>Number</dataType>
        <expression>IF(DAY({!FirstThursdayDateValue}) / 7 &lt;= 1, 1 , 
IF(DAY({!FirstThursdayDateValue}) / 7 &lt;= 2, 2 , 
IF(DAY({!FirstThursdayDateValue}) / 7 &lt;= 3, 3 , 
IF(DAY({!FirstThursdayDateValue}) / 7 &lt;= 4, 4 , 
IF(DAY({!FirstThursdayDateValue}) / 7 &lt;= 5, 5 ,0
) ) ) ))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>Today_Plus_4_Months</name>
        <dataType>Date</dataType>
        <expression>ADDMONTHS(TODAY(),4)</expression>
    </formulas>
    <formulas>
        <name>TuesdayWeekNumber</name>
        <dataType>Number</dataType>
        <expression>IF(DAY({!FirstTuesdayDateValue}) / 7 &lt;= 1, 1 , 
IF(DAY({!FirstTuesdayDateValue}) / 7 &lt;= 2, 2 , 
IF(DAY({!FirstTuesdayDateValue}) / 7 &lt;= 3, 3 , 
IF(DAY({!FirstTuesdayDateValue}) / 7 &lt;= 4, 4 , 
IF(DAY({!FirstTuesdayDateValue}) / 7 &lt;= 5, 5 ,0
) ) ) ))</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Auto Create Meeting Availabilities {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Auto Create Meeting Availabilities</label>
    <loops>
        <name>Loop_3</name>
        <label>Loop 3</label>
        <locationX>50</locationX>
        <locationY>984</locationY>
        <collectionReference>ThursdayTimes</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Copy_2_of_Assign_Dates_and_Times_For_Thursdays</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Time_to_schedule_next_pre_app_meeting</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_4</name>
        <label>Loop 4</label>
        <locationX>50</locationX>
        <locationY>684</locationY>
        <iterationOrder>Asc</iterationOrder>
        <noMoreValuesConnector>
            <targetReference>Add_to_Collection</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_For_Thursday</name>
        <label>Loop For Thursday</label>
        <locationX>74</locationX>
        <locationY>2376</locationY>
        <collectionReference>ThursdayTimes</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Dates_and_Times_For_Thursdays</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Meetings</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_For_Tuesday_Values</name>
        <label>Loop For Tuesday Values</label>
        <locationX>74</locationX>
        <locationY>1776</locationY>
        <collectionReference>TuesdayTimes</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Dates_and_Times_For_Tuesdays</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Is_Thursday_True</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Meetings</name>
        <label>Create Meetings</label>
        <locationX>182</locationX>
        <locationY>2868</locationY>
        <inputReference>Proceedings_Collection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get</name>
        <label>Get</label>
        <locationX>182</locationX>
        <locationY>252</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Number_of_Meetings_to_Schedule</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Pre-Application/Scoping</stringValue>
            </value>
        </filters>
        <filters>
            <field>MUSW__Scheduled_Date__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>MUSW__Proceeding2__c</object>
        <sortField>MUSW__Scheduled_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get</targetReference>
        </connector>
        <schedule>
            <frequency>Daily</frequency>
            <startDate>2023-09-03</startDate>
            <startTime>00:15:00.000Z</startTime>
        </schedule>
        <triggerType>Scheduled</triggerType>
    </start>
    <status>InvalidDraft</status>
    <variables>
        <name>Create_Meetings_Boolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>Current_Schedule_Date</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FirstThursdayDateTime_TO_ASSIGN</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Meeting_Values</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NineAM</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>05:00:00</stringValue>
        </value>
    </variables>
    <variables>
        <name>Number_of_Meeting_Days_to_Schedule</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>OnePM</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>17:00:00</stringValue>
        </value>
    </variables>
    <variables>
        <name>Proceedings_Collection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Proceeding2__c</objectType>
    </variables>
    <variables>
        <name>Single_Proceeding</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Proceeding2__c</objectType>
    </variables>
    <variables>
        <name>TenAM</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>06:00:00</stringValue>
        </value>
    </variables>
    <variables>
        <name>ThursdayTimes</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TuesdayTimes</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TwoPM</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>18:00:00</stringValue>
        </value>
    </variables>
</Flow>
