<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assess_Fees</name>
        <label>Assess Fees</label>
        <locationX>1964</locationX>
        <locationY>1487</locationY>
        <assignmentItems>
            <assignToReference>AssessFees</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Related_Inspections</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_New_Inspection</name>
        <label>Assign New Inspection</label>
        <locationX>578</locationX>
        <locationY>2063</locationY>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Previous_Inspection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Milestone__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Permit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Permit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Scheduled_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FourteenDaysFromNow</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Parcel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Parcel__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Address__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__r.Comments_Internal__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>&lt;br&gt;</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.MUSW__Completed_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>&lt;br&gt;</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Comments_Internal__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ExternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__r.Comments_External__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ExternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>&lt;br&gt;</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ExternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.MUSW__Completed_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ExternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>&lt;br&gt;</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ExternalComments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Comments_Public__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_New_Recurring</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_New_Inspection_Failed</name>
        <label>Assign New Inspection Failed</label>
        <locationX>1106</locationX>
        <locationY>2063</locationY>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Previous_Inspection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Milestone__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Permit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Permit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Scheduled_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FourteenDaysFromNow</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Parcel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Parcel__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Address__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.MUSW__Inspection_Template__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Inspection_Template__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewRecurringInspection.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.RecordTypeId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_New_Recurring_Failed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Permit_Variable</name>
        <label>Define Permit Variable</label>
        <locationX>1898</locationX>
        <locationY>323</locationY>
        <assignmentItems>
            <assignToReference>permit_record.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Permit__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>application_record.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Application__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>permit_record.MUSW__Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Permit__r.MUSW__Address__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>permit_record.MUSW__Parcel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.MUSW__Permit__r.MUSW__Parcel__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Evaluate_Inspection_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_All_Inspections_Completed_to_False</name>
        <label>Set All Inspections Completed to False</label>
        <locationX>2184</locationX>
        <locationY>971</locationY>
        <assignmentItems>
            <assignToReference>AllInspectionsCompleted</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Evaluate_Inspection_Closed_Action</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_All_Inspections_Pending_False</name>
        <label>Set All Inspections Pending False</label>
        <locationX>3482</locationX>
        <locationY>863</locationY>
        <assignmentItems>
            <assignToReference>AllInspectionsPending</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Related_Inspections_Pending</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Any_Inspection_Completed_Action_Empty_to_True</name>
        <label>Set Any Inspection Completed Action Empty to True</label>
        <locationX>2404</locationX>
        <locationY>1271</locationY>
        <assignmentItems>
            <assignToReference>AnyInspectionCompletedActionEmpty</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Related_Inspections</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Any_Inspection_Corrections_Required_True</name>
        <label>Set Any Inspection Corrections Required True</label>
        <locationX>2096</locationX>
        <locationY>1271</locationY>
        <assignmentItems>
            <assignToReference>AnyInspectionCorrectionsRequired</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assess_Fees_Decision</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Are_we_adding_fees</name>
        <label>Are we adding fees</label>
        <locationX>1502</locationX>
        <locationY>2387</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Add_Fees</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AssessFees</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_the_permit_status_to_fees_due</targetReference>
            </connector>
            <label>Add Fees</label>
        </rules>
    </decisions>
    <decisions>
        <name>Are_we_adding_fees_App</name>
        <label>Are we adding fees</label>
        <locationX>2030</locationX>
        <locationY>2387</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Add_Fees_App</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AssessFees</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_the_permit_status_to_fees_due_App</targetReference>
            </connector>
            <label>Add Fees</label>
        </rules>
    </decisions>
    <decisions>
        <name>Assess_Fees_Decision</name>
        <label>Assess Fees Decision</label>
        <locationX>2096</locationX>
        <locationY>1379</locationY>
        <defaultConnector>
            <targetReference>Loop_on_Related_Inspections</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Major_Failure_Fees_Required</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Fail - Major</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assess_Fees</targetReference>
            </connector>
            <label>Major Failure/Fees Required</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Copy_1_of_Recurring_Inspections</name>
        <label>Copy 1 of Copy 1 of Recurring Inspections</label>
        <locationX>1535</locationX>
        <locationY>1955</locationY>
        <defaultConnector>
            <targetReference>Update_Milestone_Status_and_Completed_Action_to_Completed_and_Corrections_Requir</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Schedule_Additional_Inspection_Failed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recurring Inspections</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_New_Inspection_Failed</targetReference>
            </connector>
            <label>Schedule Additional Inspection Failed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_All_Inspections_Completed_Any_Inspection_Completed_Action_Empty_and_Any</name>
        <label>Evaluate All Inspections Completed, Any Inspection Completed Action Empty and Any Inspection Corrections Required</label>
        <locationX>1700</locationX>
        <locationY>1847</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>All_Inspections_Completed_and_Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AllInspectionsCompleted</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AnyInspectionCompletedActionEmpty</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AnyInspectionCorrectionsRequired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Recurring_Inspections</targetReference>
            </connector>
            <label>All Inspections Completed and Approved</label>
        </rules>
        <rules>
            <name>All_Inspections_Completed_but_Corrections_Required</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AllInspectionsCompleted</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AnyInspectionCompletedActionEmpty</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AnyInspectionCorrectionsRequired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Copy_1_of_Recurring_Inspections</targetReference>
            </connector>
            <label>All Inspections Completed but Corrections Required</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Are_All_Inspections_Pending_True</name>
        <label>Evaluate Are All Inspections Pending True</label>
        <locationX>3218</locationX>
        <locationY>1139</locationY>
        <defaultConnectorLabel>An Inspection is not in Pending</defaultConnectorLabel>
        <rules>
            <name>AllRecurringInspectionsPending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AllInspectionsPending</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recurring Inspections</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Scheduled_Start_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Scheduled_Start_Date</targetReference>
            </connector>
            <label>AllRecurringInspectionsPending</label>
        </rules>
        <rules>
            <name>All_Inspections_in_Pending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AllInspectionsPending</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Milestone_Status_to_Pending</targetReference>
            </connector>
            <label>All Inspections in Pending</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Inspection_Closed_Action</name>
        <label>Evaluate Inspection Closed Action</label>
        <locationX>2096</locationX>
        <locationY>1163</locationY>
        <defaultConnector>
            <targetReference>Set_Any_Inspection_Completed_Action_Empty_to_True</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Approved</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pass</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_on_Related_Inspections</targetReference>
            </connector>
            <label>Approved</label>
        </rules>
        <rules>
            <name>Corrections_Required</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Corrections Required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Fail - Minor</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Fail - Major</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Fail</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Close_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Partial Pass</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Any_Inspection_Corrections_Required_True</targetReference>
            </connector>
            <label>Corrections Required</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Inspection_Status</name>
        <label>Evaluate Inspection Status</label>
        <locationX>1898</locationX>
        <locationY>431</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>In_Progress_or_Enroute</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>En Route</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Milestone_Status_to_In_Progress</targetReference>
            </connector>
            <label>In Progress or Enroute</label>
        </rules>
        <rules>
            <name>Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Recurring_Milestone_Complete</targetReference>
            </connector>
            <label>Completed</label>
        </rules>
        <rules>
            <name>Pending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Related_Inspections_Pending</targetReference>
            </connector>
            <label>Pending</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Is_Inspection_Pending</name>
        <label>Evaluate Is Inspection Pending</label>
        <locationX>3394</locationX>
        <locationY>755</locationY>
        <defaultConnector>
            <targetReference>Set_All_Inspections_Pending_False</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Pending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections_Pending.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_on_Related_Inspections_Pending</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Is_Inspection_Status_Completed</name>
        <label>Evaluate Is Inspection Status Completed</label>
        <locationX>2096</locationX>
        <locationY>863</locationY>
        <defaultConnector>
            <targetReference>Set_All_Inspections_Completed_to_False</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_on_Related_Inspections.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Evaluate_Inspection_Closed_Action</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Permit_or_Application</name>
        <label>Permit or Application</label>
        <locationX>1964</locationX>
        <locationY>2279</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Permit</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Permit__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Are_we_adding_fees</targetReference>
            </connector>
            <label>Permit</label>
        </rules>
        <rules>
            <name>Application</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Application__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Are_we_adding_fees_App</targetReference>
            </connector>
            <label>Application</label>
        </rules>
    </decisions>
    <decisions>
        <name>Recurring_Inspections</name>
        <label>Recurring Inspections</label>
        <locationX>710</locationX>
        <locationY>1955</locationY>
        <defaultConnector>
            <targetReference>Update_Milestone_Status_and_Completed_Action_to_Completed_and_Approved</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Schedule_Additional_Inspection</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recurring Inspections</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.MUSW__Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_New_Inspection</targetReference>
            </connector>
            <label>Schedule Additional Inspection</label>
        </rules>
    </decisions>
    <decisions>
        <name>Recurring_Milestone_Complete</name>
        <label>Recurring Milestone Complete?</label>
        <locationX>1007</locationX>
        <locationY>539</locationY>
        <defaultConnector>
            <targetReference>Get_Related_Inspections</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Recurring_Inspections_Complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recurring Inspections</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.MUSW__Completed_Action__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MUSW__Milestone__r.MUSW__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <label>Recurring Inspections Complete</label>
        </rules>
    </decisions>
    <description>BC - adding conditions for Partial Pass workflow</description>
    <environments>Default</environments>
    <formulas>
        <name>FourteenDaysFromNow</name>
        <dataType>Date</dataType>
        <expression>Today() + 14</expression>
    </formulas>
    <formulas>
        <name>Today_Plus_365Days</name>
        <dataType>Date</dataType>
        <expression>TODAY()+365</expression>
    </formulas>
    <interviewLabel>Inspection - Update Milestone Status {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Inspection - Update Milestone Status</label>
    <loops>
        <name>Loop_on_Related_Inspections</name>
        <label>Loop on Related Inspections</label>
        <locationX>1700</locationX>
        <locationY>755</locationY>
        <collectionReference>Get_Related_Inspections</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Evaluate_Is_Inspection_Status_Completed</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Evaluate_All_Inspections_Completed_Any_Inspection_Completed_Action_Empty_and_Any</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_on_Related_Inspections_Pending</name>
        <label>Loop on Related Inspections</label>
        <locationX>3218</locationX>
        <locationY>647</locationY>
        <collectionReference>Get_Related_Inspections_Pending</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Evaluate_Is_Inspection_Pending</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Evaluate_Are_All_Inspections_Pending_True</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_New_Recurring</name>
        <label>Create New Recurring</label>
        <locationX>578</locationX>
        <locationY>2171</locationY>
        <connector>
            <targetReference>Update_Milestone_Comments</targetReference>
        </connector>
        <inputReference>NewRecurringInspection</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_New_Recurring_Failed</name>
        <label>Create New Recurring Failed</label>
        <locationX>1106</locationX>
        <locationY>2171</locationY>
        <inputReference>NewRecurringInspection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Related_Inspections</name>
        <label>Get Related Inspections</label>
        <locationX>1700</locationX>
        <locationY>647</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_on_Related_Inspections</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Milestone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>MUSW__Inspection__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>MUSW__Status__c</queriedFields>
        <queriedFields>MUSW__Close_Action__c</queriedFields>
        <queriedFields>RecordTypeId</queriedFields>
        <queriedFields>MUSW__Type__c</queriedFields>
        <queriedFields>MUSW__Milestone__c</queriedFields>
        <queriedFields>MUSW__Completed_Date__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Related_Inspections_Pending</name>
        <label>Get Related Inspections</label>
        <locationX>3218</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_on_Related_Inspections_Pending</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Milestone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>MUSW__Inspection__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>MUSW__Status__c</queriedFields>
        <queriedFields>MUSW__Scheduled_Start_Date__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Copy_1_of_Update_Milestone_Status_to_Pending</name>
        <label>Copy 1 of Update Milestone Status to Pending</label>
        <locationX>2954</locationX>
        <locationY>1355</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Inspection_Address</name>
        <label>Update Inspection Address</label>
        <locationX>3218</locationX>
        <locationY>1355</locationY>
        <connector>
            <targetReference>Update_Inspection_Parcel</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Address__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Address__c</field>
            <value>
                <elementReference>permit_record.MUSW__Address__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Inspection_Completed_Date</name>
        <label>Update Inspection Completed Date</label>
        <locationX>1964</locationX>
        <locationY>2171</locationY>
        <connector>
            <targetReference>Permit_or_Application</targetReference>
        </connector>
        <inputAssignments>
            <field>MUSW__Completed_Date__c</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Inspection_Parcel</name>
        <label>Update Inspection Parcel</label>
        <locationX>3218</locationX>
        <locationY>1463</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Parcel__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Parcel__c</field>
            <value>
                <elementReference>permit_record.MUSW__Parcel__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Milestone_Comments</name>
        <label>Update Milestone Comments</label>
        <locationX>578</locationX>
        <locationY>2279</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Comments_External__c</field>
            <value>
                <elementReference>ExternalComments</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Comments_Internal__c</field>
            <value>
                <elementReference>InternalComments</elementReference>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Milestone_Status_and_Completed_Action_to_Completed_and_Approved</name>
        <label>Update Milestone Status and Completed Action to Completed and Approved</label>
        <locationX>842</locationX>
        <locationY>2063</locationY>
        <connector>
            <targetReference>Update_permit_expiration_date</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Completed_Action__c</field>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Milestone_Status_and_Completed_Action_to_Completed_and_Corrections_Requir</name>
        <label>Update Milestone Status and Completed Action to Completed and Corrections Required</label>
        <locationX>1964</locationX>
        <locationY>2063</locationY>
        <connector>
            <targetReference>Update_Inspection_Completed_Date</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Completed_Action__c</field>
            <value>
                <stringValue>Corrections Required</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Milestone_Status_to_In_Progress</name>
        <label>Update Milestone Status to In Progress</label>
        <locationX>50</locationX>
        <locationY>539</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>In Progress</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Milestone_Status_to_Pending</name>
        <label>Update Milestone Status to Pending</label>
        <locationX>3218</locationX>
        <locationY>1247</locationY>
        <connector>
            <targetReference>Update_Inspection_Address</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.MUSW__Milestone__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Milestone__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_permit_expiration_date</name>
        <label>Update permit expiration date</label>
        <locationX>842</locationX>
        <locationY>2171</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>permit_record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Expiration_Date__c</field>
            <value>
                <elementReference>Today_Plus_365Days</elementReference>
            </value>
        </inputAssignments>
        <object>MUSW__Permit2__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Scheduled_Start_Date</name>
        <label>Update Scheduled Start Date</label>
        <locationX>2954</locationX>
        <locationY>1247</locationY>
        <connector>
            <targetReference>Copy_1_of_Update_Milestone_Status_to_Pending</targetReference>
        </connector>
        <inputAssignments>
            <field>MUSW__Scheduled_Start_Date__c</field>
            <value>
                <elementReference>FourteenDaysFromNow</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>update_the_permit_status_to_fees_due</name>
        <label>update the permit status to fees due</label>
        <locationX>1370</locationX>
        <locationY>2495</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>permit_record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Expiration_Date__c</field>
            <value>
                <elementReference>Today_Plus_365Days</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Fees Due</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Permit2__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_the_permit_status_to_fees_due_App</name>
        <label>Update the permit status to fees due</label>
        <locationX>1898</locationX>
        <locationY>2495</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>application_record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MUSW__Status__c</field>
            <value>
                <stringValue>Fees Due</stringValue>
            </value>
        </inputAssignments>
        <object>MUSW__Application2__c</object>
    </recordUpdates>
    <start>
        <locationX>1772</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Define_Permit_Variable</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>MUSW__Milestone__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </filters>
        <object>MUSW__Inspection__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>AllInspectionsCompleted</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
    <variables>
        <name>AllInspectionsPending</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
    <variables>
        <name>AnyInspectionCompletedActionEmpty</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>AnyInspectionCorrectionsRequired</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>application_record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Application2__c</objectType>
    </variables>
    <variables>
        <name>AssessFees</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>ExternalComments</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>InternalComments</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NewInspection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Inspection__c</objectType>
    </variables>
    <variables>
        <name>NewRecurringInspection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Inspection__c</objectType>
    </variables>
    <variables>
        <name>permit_record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>MUSW__Permit2__c</objectType>
    </variables>
    <variables>
        <name>RecurringInspection</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
</Flow>
